# CharmDirect Plugin - Masters Portfolio Widget

Виджет динамического портфолио мастеров для платформы YCLIENTS с интеграцией CharmDirect API.

## О проекте

Плагин `masters-promo` предоставляет современный интерактивный виджет для отображения портфолио работ мастеров. Виджет загружает данные из CharmDirect API и отображает их в удобном формате с горизонтальной прокруткой и галереей.

**Важно:** Плагин создан для интеграции в Angular-приложение YCLIENTS. Vue 3 включен в бандл плагина, что обеспечивает полную автономность и возможность работы в любом окружении без дополнительных зависимостей.

## Возможности

- Динамическая загрузка портфолио из CharmDirect API
- Горизонтальная прокрутка изображений с навигационными кнопками
- Темная галерея с основным изображением и миниатюрами
- Постраничная прокрутка миниатюр при навигации
- Адаптивный дизайн для мобильных и десктопа
- Плавные анимации и переходы
- Интеграция с contract.json для определения зон плагина

## Структура

- `apps/masters-promo/` - Основное приложение виджета
  - `src/components/` - Vue компоненты (PortfolioWidget, PortfolioCarousel)
  - `src/services/` - Сервисы для работы с API
  - `src/types/` - TypeScript типы и интерфейсы
  - `src/utils/` - Утилиты и вспомогательные функции
- `packages/` - Переиспользуемые библиотеки
- `contract.json` - Контракт плагина с определением зон интеграции

## Начало работы

### Требования

- Node.js >= 18.0.0
- npm >= 9.0.0

### Установка

```bash
# Установка зависимостей
npm install
```

### Разработка

```bash
# Запуск режима разработки плагина masters-promo
cd apps/masters-promo
npm run dev

# Сборка плагина
npm run build

# Проверка линтером
npm run lint

# Форматирование кода
npm run format
```

## Технологический стек

- **Vue 3** - Прогрессивный JavaScript фреймворк (включен в бандл)
- **TypeScript** - Типизированный JavaScript
- **Vite** - Быстрый инструмент сборки
- **CharmDirect API** - API для загрузки портфолио мастеров
- **YCLIENTS Widget API** - API для интеграции с платформой
- **Target Environment** - Angular приложение YCLIENTS

## Конфигурация

### contract.json

Файл `contract.json` определяет зоны интеграции плагина:

```json
{
  "packages": {
    "widget-masters-promo": {
      "application": "widget",
      "areas": ["root"]
    }
  },
  "plugin-slug": "widget-masters-promo-slug"
}
```

### Использование API

Плагин использует CharmDirect API для загрузки портфолио:

```typescript
const response = await fetch(
  `https://api.charmdirect.ru/api/v1/staff/${staffId}/public_portfolio`,
);
```

## Разработка и тестирование

1. Запустите dev сервер: `npm run dev`
2. Откройте <http://localhost:5173>
3. Виджет будет загружать портфолио для мастера с ID из кода

## Сборка для продакшена

```bash
cd apps/masters-promo
npm run build
```

Скомпилированные файлы будут в папке `dist/`:

- `widget-masters-promo.es.js` - ES модуль (~165 KB, включая Vue 3)
- `widget-masters-promo.umd.js` - UMD модуль (~109 KB, включая Vue 3)
- `style.css` - Стили виджета (~6.5 KB)

### Особенности сборки

Плагин собирается с включенным Vue 3 в бандл (не external), что позволяет:

- Использовать плагин в Angular-приложении без дополнительных зависимостей
- Гарантировать совместимость версий Vue
- Избежать конфликтов зависимостей
- Обеспечить полную изоляцию плагина

---

## Лицензия

YCLIENTS © 2025
